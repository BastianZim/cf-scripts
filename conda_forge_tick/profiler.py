from cProfile import Profile
from contextlib import contextmanager


class Profiled(Profile):
    # extend init case for cProfile.Profile
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.disable()  # Profiling initially off.

    @contextmanager
    def __call__(self):
        self.enable()
        yield  # Execute code to be profiled.
        self.disable()
